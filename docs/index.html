<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Counterfactual Analysis • cfa</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">cfa</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="cfa" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cfa" class="anchor"></a>cfa</h1></div>
<p>The cfa package contains methods for computing counterfactuals with a continuous treatment variable. In particular, the package can be used to calculate the expected value, the variance, the interquantile range, the fraction of observations below or above a particular cutoff, or other user-supplied functions of an outcome of interest conditional on a continuous treatment. The package can also be used for computing these same functionals after adjusting for differences in covariates at different values of the treatment. Further, one can use the package to conduct uniform inference for each parameter of interest across all values of the treatment, uniformly test whether adjusting for covariates makes a difference at any value of the treatment, and test whether a parameter of interest is different from its average value at an value of the treatment.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install cfa from github with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools::<span class="kw">install_github</span>(<span class="st">"WeigeHuangEcon/cfa"</span>)
<span class="co">#&gt; Skipping install of 'cfa' from a github remote, the SHA1 (c5296cc5) has not changed since last install.</span>
<span class="co">#&gt;   Use `force = TRUE` to force installation</span></code></pre></div>
<p>or from CRAN using</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"cfa"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The following example shows how to estimate the counterfactual distribution of child’s income as a function of parent’s income, as well as some additional parameters that depend on this distribution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cfa)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'cfa'</span>
<span class="co">#&gt; The following object is masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     IQR</span>
<span class="kw">data</span>(igm)
tvals &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">10</span>,<span class="dv">12</span>,<span class="dt">length.out=</span><span class="dv">10</span>)
yvals &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">quantile</span>(igm$lcfincome, .<span class="dv">05</span>), <span class="kw">quantile</span>(igm$lcfincome, .<span class="dv">95</span>), <span class="dt">length.out=</span><span class="dv">50</span>)
## This line doesn't adjust for any covariates
obs.dist &lt;-<span class="st"> </span><span class="kw">cfa</span>(lcfincome ~<span class="st"> </span>lfincome, <span class="dt">tvals=</span>tvals, <span class="dt">yvals=</span>yvals, <span class="dt">data=</span>igm, <span class="dt">iters=</span><span class="dv">25</span>)
<span class="co">#&gt; boostrapping standard errors...</span>

## This line adjusts for differences in education
cf.dist &lt;-<span class="st"> </span><span class="kw">cfa</span>(lcfincome ~<span class="st"> </span>lfincome, ~HEDUC, <span class="dt">tvals=</span>tvals, <span class="dt">yvals=</span>yvals, <span class="dt">data=</span>igm, <span class="dt">iters=</span><span class="dv">25</span>)
<span class="co">#&gt; boostrapping standard errors...</span>
<span class="kw">class</span>(cf.dist)
<span class="co">#&gt; [1] "CFA"</span>
<span class="kw">attributes</span>(cf.dist)
<span class="co">#&gt; $names</span>
<span class="co">#&gt; [1] "tvals"        "distcondt"    "bootiterlist" "tvallist"    </span>
<span class="co">#&gt; [5] "coef"        </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] "CFA"</span></code></pre></div>
<p>The objects that are returned from the <code>cfa</code> method are (most of the time) too complicated to directly understand, as they are distribution function for every value of <span class="math inline">\(t\)</span>. Instead, the <code>getRes.CFA</code> method can be used to obtain particular results from a CFA object. Here is an example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cf.e &lt;-<span class="st"> </span><span class="kw"><a href="reference/getRes.CFA.html">getRes.CFA</a></span>(cf.dist, <span class="dt">fun=</span>E, <span class="dt">se=</span>T)</code></pre></div>
<p>The parameter <code>fun</code> in the <code>getRes.CFA</code> function accepts any function that can be applied to a distribution function and return a single number (additional parameters that the function needs can be passed through the <code>...</code> argument). In the example above, <code>E</code> is computes the expectation given a distribution function – this function is supplied in the package. Besides <code>E</code>, functions for computing the variance, inter-quantile range, the fraction of individuals below the poverty line, and the fraction of individuals who are “rich” – these are called <code>Var</code>, <code>IQR</code>, <code>pov</code>, and <code>rich</code>. But other custom functions could be developed by users.</p>
<p>These types of results are simple to plot as function of <span class="math inline">\(t\)</span>. The <code>cfa</code> packages implements plotting mechanisms using <code>ggplot2</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/ggplot2.CFA.html">ggplot2.CFA</a></span>(cf.e)</code></pre></div>
<p><img src="README-unnamed-chunk-4-1.png" width="672"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=cfa">https://​cran.r-project.org/​package=cfa</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Weige Huang <br><small class="roles"> Author, maintainer </small> </li>
<li>Brantly Callaway <br><small class="roles"> Author </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Weige Huang, Brantly Callaway.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
