library(cfa)
library(cfa)
? getCondQuants
getCondQuants
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
View(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
View(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
data=as.data.frame(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
data=as.data.frame(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
age2
View(data)
rm(list=ls())
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
library(cfa)
rm(list=ls())
detach("package:cfa", unload=TRUE)
library("cfa", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
getCondQuants
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
data=as.data.frame(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
data=as.data.frame(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
age=data$age
t=lfincome
t=data$lfincome
y=data$lincome
n_ctvals=5
ctvals=seq(quantile(t,.05), quantile(t, .95), length.out=n_ctvals)
fit=getCondQuants(Y=y,X=x,t=lfincome,s=20,e=0.05)
fit=getCondQuants(Y=y,X=x,t,s=20,e=0.05)
fit=getCondQuants(Y=y,X=x,t,s=20,e=0.05)
fit=getCondQuants(y,x,t,s=20,e=0.05)
library(cfa)
detach("package:cfa", unload=TRUE)
library("cfa", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
fit=getCondQuants(y,x,t,s=20,e=0.05)
library(devtools)
library(cfa)
detach("package:cfa", unload=TRUE)
library("cfa", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
hello()
library(cfa)
getCondQuants(y,x,t,s=20,e=0.05)
library(cfa)
getCondQuants(y,x,t,s=20,e=0.05)
? cfa
?? cfa
? quantreg
??quantreg
quantreg
? quantreg
getCondQuants
rq
library(cfa)
library(cfa)
library(cfa)
detach("package:cfa", unload=TRUE)
library("cfa", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
getCondQuants(y,x,t,s=20,e=0.05)
getCondQuants(y,x,t,s=20,e=0.05,data = data)
library(cfa)
library(cfa)
detach("package:cfa", unload=TRUE)
library("cfa", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
getCondQuants(y,x,t,s=20,e=0.05,data = data)
getCondQuants(Y=y,X=x,t=t,s=20,e=0.05,data = data)
getCondQuants=function(Y,X,t,s=NULL,e=NULL,data){
if(is.null(s)){
s=nrow(X)
}
if(is.null(e)){
e=0.05
}
library(quantreg)
taus=seq(e,1-e,length.out = s)
rq(Y~t+X,tau = taus )
}
fit=getCondQuants(Y=y,X=x,t=lfincome,s=20,e=0.05)
fit=getCondQuants(Y=y,X=x,t=t,s=20,e=0.05)
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/igedata/igedata.csv')
rm(list=ls())
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
data=as.data.frame(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hvereran,high,somecollege,college,advanced)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
build()
library(devtools)
build()
library(cfa)
library(cfa)
library(cfa)
library(devtools)
build()
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library("roxygen2", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
load_all()
load_all()
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
build()
library(cfa)
data=read.delim('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
save(data,file = 'data.rda')
prompt(data)
library(cfa)
data()
library(cfa)
library(cfa)
library(cfa)
build()
library(devtools)
build()
data=read.csv('/Users/weigehuang/Documents/Mac/Dissertation/Quantitle/R_Package/dta.csv')
save(data,file = 'data.rda')
prompt(data)
library(cfa)
library(devtools)
build()
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(devtools)
library(roxygen2)
library(cfa)
build()
library(cfa)
library(cfa)
library(devtools)
library(roxygen2)
library(cfa)
build()
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
library(cfa)
build()
library(devtools)
library(roxygen2)
library(cfa)
library(cfa)
build()
library(devtools)
library(roxygen2)
library(cfa)
library(cfa)
library(cfa)
build()
library(devtools)
library(roxygen2)
library(cfa)
build()
library(cfa)
rm(list=ls())
library(cfa)
data('data')
attach(data)
x=cbind(age,age2,sex,headage,headage2,headsex,hveteran,high,somecollege,college,advanced)
t=lfincome
y=lincome
n_ctvals=5
ctvals=seq(quantile(t,.05), quantile(t, .95), length.out=n_ctvals)
fit=getCondQuants.qr(Y=y,X=x,t=lfincome,s=20,e=0.05)
coefficients=fit$coefficients
coefficients=fit$coefficients[2,]
plot(coefficients,type = 'l',ylab = 'Conefficients', xlab = 'Quantiles')
b=getCountQuant.qr(Y=y,X=x,t=lfincome,ct=ctvals[2],s=20,e=0.05 )
fs=makeCountDisFs.qr(Y=y,X=x,t=lfincome,ct=ctvals[2],s=20,e=0.05)
fs1=makeCountDisFs.qr(Y=y,X=x,t=lfincome,ct=ctvals[4],s=20,e=0.05)
ysort=sort(y)
plot(ysort,fs,type = 'l')
lines(ysort,fs1,col='red')
quants=c(0.1,0.25,0.5,0.75,0.9)
DisFs2Quants.qr(Y=y,X=x,t=lfincome,ct=ctvals[5],quants,s=20,e=0.05)
cQMat=getCountQuants.qr (Y=y,X=x,t=lfincome,cts =ctvals ,quants=quants,s=20,e=0.05)
matplot(ctvals,t(cQMat),type="l")
boot.getCountQuants.qr(B=2,Y=y,X=x,t=lfincome,cts=ctvals,quants=quants,s=20,e=0.05)
sdmat=getSDMat.qr(B=2,Y=y,X=x,t=lfincome,cts=ctvals,quants=quants,s=20,e=0.05)
CountQuants.plot(CountQuants=cQMat,SDMat=sdmat)
library(cfa)
cores=detectCores()
library(foreach)
library(doParallel)
cores=detectCores()
cl <- makeCluster(cores[1]-1) #not to overload your computer
cores[1]
registerDoParallel(cl)
par.boot.getCountQuants.qr <- function(B=NULL,Y,X,t,cts,quants=NULL,s=NULL,e=NULL) {
if(is.null(quants)){
quants=c(0.1,0.5,0.9)
}
if(is.null(B)){
B=10
}
library(foreach)
library(doParallel)
#setup parallel backend to use many processors
cores=detectCores()
cl <- makeCluster(cores[1]-1) #not to overload your computer
registerDoParallel(cl)
boot.results_list=list(list())
foreach(b=1:B, .combine=cbind, .packages = c("data.table")) %dopar% {
n <- nrow(X)
bdata<-cbind(Y,t,X)
bdata <- as.data.frame(bdata[sample(1:n, n, replace=T),])
Y=bdata$Y
X=as.matrix(bdata[,c(colnames(X))])
t=bdata$t
boot.result=getCountQuants.qr(Y,X,t,cts,quants,s,e)
colnames(boot.result)<-round(cts,1)
boot.results_list=list(boot.result)
}
stopCluster(cl)
boot.results_list
}
par.boot.getCountQuants.qr(B=2,Y=y,X=x,t=lfincome,cts=ctvals,quants=NULL,s=20,e=0.05)
library(cfa)
build()
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library(devtools)
library("roxygen2", lib.loc="/Library/Frameworks/R.framework/Versions/3.4/Resources/library")
library(cfa)
glm
? match.call
match.call(get, call("get", "abc", i = FALSE, p = 3))
fun <- function(x, lower = 0, upper = 1) {
structure((x - lower) / (upper - lower), CALL = match.call())
}
fun(4 * atan(1), u = pi)
? atan
atan(30)
atan(90)
tan(45)
atanh(45)
list(1, 2)
y <- c(list(1, 2), c(3, 4))
str(y)
mod <- lm(mpg ~ wt, data = mtcars)
is.list(mod)
mod
?lm
lm
x <- quote(read.csv("important.csv", row.names = FALSE))
x
?quote
require(graphics)
(s.e <- substitute(expression(a + b), list(a = 1)))  #> expression(1 + b)
(s.s <- substitute( a + b,            list(a = 1)))  #> 1 + b
c(mode(s.e), typeof(s.e)) #  "call", "language"
c(mode(s.s), typeof(s.s)) #   (the same)
(e.s.e <- eval(s.e))          #>  expression(1 + b)
c(mode(e.s.e), typeof(e.s.e)) #  "expression", "expression"
substitute(x <- x + 1, list(x = 1)) # nonsense
myplot <- function(x, y)
plot(x, y, xlab = deparse(substitute(x)),
ylab = deparse(substitute(y)))
f1 <- function(x, y = x)             { x <- x + 1; y }
s1 <- function(x, y = substitute(x)) { x <- x + 1; y }
s2 <- function(x, y) { if(missing(y)) y <- substitute(x); x <- x + 1; y }
a <- 10
f1(a)  # 11
s1(a)  # 11
s2(a)  # a
ï¼Ÿlm
?lm
lm
getCondQuants.qr
library(cfa)
getCondQuants.qr
glm()
glm
library(roxygen2)
library(devtools)
library(cfa)
build()
rm(list=ls())
setwd('/Users/weigehuang/Dropbox/Int Gen Mobility/New Version Data and Codes/Figures and latex codes')
data=read.csv('igedata.csv')
View(data)
data$lesshigh = ifelse ( ( headeduc <= 11 ), 1 , 0 )
attach(data)
data$lesshigh = ifelse ( ( headeduc <= 11 ), 1 , 0 )
View(data)
